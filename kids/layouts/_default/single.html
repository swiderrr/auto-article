{{/* Use the theme's base layout so pages get full site chrome (sidebars, header, footer) */}}
{{ define "main" }}
	<article class="page-content article-page">
		<header class="article-header">
			<h1>{{ .Title }}</h1>
		</header>
		{{/* AI disclosure: show explicit notice when front-matter indicates AI generation */}}
		{{ if or .Params.ai_generated .Params.ai_disclaimer }}
			<div class="ai-disclaimer" style="border-left:4px solid #eee;padding:10px;margin:12px 0;background:#f9f9f9;color:#333;">
				{{ with .Params.ai_disclaimer }}
					{{ . | safeHTML }}
				{{ else }}
					<strong>Uwaga:</strong> Ten artykuł został wygenerowany przy użyciu narzędzi sztucznej inteligencji. Treść ma charakter informacyjny — prosimy o dodatkową weryfikację w przypadkach medycznych, prawnych i innych specjalistycznych porad.
				{{ end }}
			</div>
		{{ end }}
		<section class="article-content">
			{{ .Content }}
		</section>
		{{/* Article JSON-LD schema for SEO and rich results */}}
		{{ if not .IsHome }}
		{{- /* compute publisher logo URL safely */ -}}
		{{- $logo := "" -}}
		{{- with .Site.Params.favicon -}}
			{{- if strings.HasPrefix . "http" -}}
				{{- $logo = . -}}
			{{- else -}}
				{{- $logo = printf "%s%s" $.Site.BaseURL . -}}
			{{- end -}}
		{{- end -}}
		<script type="application/ld+json">
		{
		  "@context": "https://schema.org",
		  "@type": "Article",
		  "mainEntityOfPage": {
		    "@type": "WebPage",
		    "@id": "{{ .Permalink }}"
		  },
		  "headline": "{{ .Title | safeJS }}",
		  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
		  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
		  "author": {
		    "@type": "Person",
		    "name": "{{ with index .Params.authors 0 }}{{ . }}{{ else }}{{ .Site.Author.name }}{{ end }}"
		  },
		  "publisher": {
		    "@type": "Organization",
		    "name": "{{ .Site.Title }}",
		    "logo": {"@type":"ImageObject","url":"{{ $logo }}"}
		  },
		  "description": "{{ .Params.seo.description | default .Params.summary | default .Summary | default .Site.Params.description | safeJS }}"
		}
		</script>
		{{ end }}
	</article>
{{ end }}